!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.fipmanClient=n():e.fipmanClient=n()}(window,function(){return function(e){var n={};function t(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,t),o.l=!0,o.exports}return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=0)}([function(e,n,t){"use strict";const i=["s3"];let o=null,r=null,a="http://client.fipman.com/?options=";const l=".fipman-overlay{position:fixed;top:0;right:0;bottom:0;left:0;z-index:1000;background:rgba(239, 239, 242, 0.8)}.fipman-container{position:fixed;overflow:hidden;min-height:300px;top:50px;right:150px;bottom:50px;left:150px;box-sizing:content-box;-webkit-box-sizing:content-box}";let d="";const s=function(e){if(g(e))return o=e,a+=JSON.stringify({apiKey:e.apiKey,blob:e.storage,lang:e.language||"en",allowMultipleUpload:void 0===e.allowMultipleUpload||e.allowMultipleUpload,allowFiles:e.allowFiles||"*",maxFileSize:1e3*(e.maxFileSize||0)}),m(),a},m=function(){return d="<div><div id='fipman-inner-container' class='fipman-container'>",d+="<iframe name='filepicker_dialog' id='filepicker_dialog' border='0' frameborder='0' marginwidth='0' marginheight='0' src='"+a+"' style='width: 100%; height: 100%; border: none; position: relative;'></iframe>'",d+="</div>"},p=function(){var e=document.documentElement.clientWidth,n=document.documentElement.clientHeight,t=(e-300)/1.86,i=t<=n?n-50-t:50;document.getElementById("fipman-inner-container").style.bottom=i+"px"},c=function(e){if("fipman-end"===e.data.event_id){var n=e.data.data;r(void 0,n),f()}else"fipman-error"===e.data.event_id&&(r({message:e.data.errorMessage},void 0),f())},f=function(){var e=document.getElementById("fipman-container");e&&e.parentNode.removeChild(e);var n=document.getElementById("fipman-styles");return n&&n.parentNode.removeChild(n),document.getElementsByTagName("html")[0].style.overflow="",window.removeEventListener("message",c,!0),window.removeEventListener("resize",p),!1},u=function(e){if(o){r=e;var n=document.getElementsByTagName("head")[0],t=document.getElementsByTagName("body")[0],i=document.createElement("style");i.id="fipman-styles",i.innerHTML=l,n.appendChild(i);var a=document.createElement("div");a.id="fipman-container",a.onclick=function(){f()},a.classList="fipman-overlay",a.innerHTML=d,t.appendChild(a),p(),document.getElementsByTagName("html")[0].style.overflow="hidden",window.addEventListener("message",c,!0),window.addEventListener("resize",p)}},g=function(e){if(e){if(e.apiKey){if(e.storage){if(i.includes(e.storage.toLowerCase()))return!0;throw new Error("Fipman needs valid storage!")}throw new Error("Fipman needs storage location!")}throw new Error("Fipman needs api key!")}throw new Error("Fipman needs initials options to run!")};window._DEV_?e.exports={init:s,show:u,hide:f,validateOptions:g,setIframe:m,uploaderURL:a,style:l}:e.exports={init:s,show:u,hide:f}}])});